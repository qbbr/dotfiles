#!/usr/bin/env bash

# ./say-greatwords
# from greatwords.ru
#
# using:
#   ./script           - get random quote
#   ./script --color   - colored output (dont use \w notify)
#   ./script --notify  - show via notidy-send
#
# depends: wget, fold, notify-send, .bash_colors
# author: @qbbr

TEXT=$(wget -qO - http://greatwords.ru/random/ 2> /dev/null | sed -ne '/quote-p\|info-p/!b;s/<[^>]*>//g;s/&nbsp;/ /g;s/&hellip;/.../g;p')

if [[ "$1" == "--color" ]]; then
	. ~/.bash_colors
	TEXT=$(echo ${TEXT} | sed "s/«/\\${_c_yellow}«/" | sed "s/»/»\\${_c_reset}/")
	TEXT=$(echo -e ${_c_white}${TEXT})
elif [[ "$1" == "--notify" ]]; then
	notify-send -t 60000 -a "<(^_^)>" " greatwords" "\n${TEXT}"
	exit 0
fi

echo ${TEXT} | fold -sw 80
