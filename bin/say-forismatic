#!/usr/bin/env bash

# ./say-forismatic
# from forismatic.com
#
# using:
#   ./script           - get random quote
#   ./script --color   - colored output (dont use \w notify)
#   ./script --notify  - show via notify-send
#
# depends: wget, fold, notify-send, .bash_colors
# author: @qbbr

TEXT=$(wget -qO - http://api.forismatic.com/api/1.0/ --post-data="method=getQuote&format=text&lang=ru" 2> /dev/null)

if [[ "$1" == "--color" ]]; then
	. ~/.bash_colors
	TEXT=$(echo ${TEXT} | sed "s/(/\\\n\\${_c_yellow}/" | sed "s/)/\\${_c_reset}/")
	TEXT=$(echo -e ${_c_white}${TEXT})
elif [[ "$1" == "--notify" ]]; then
	notify-send -t 60000 -a "<(^_^)>" " forismatic" "\n${TEXT}"
	exit 0
fi

echo ${TEXT} | fold -sw 80
